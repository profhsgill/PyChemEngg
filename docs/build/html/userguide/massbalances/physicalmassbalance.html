

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Physical Process &mdash; PyChemEngg 0.1a11 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/my_theme.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/katex-math.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.12.0/contrib/auto-render.min.js"></script>
        <script src="../../_static/katex_autorenderer.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PyChemEngg API" href="../../autosummary_pychemengg.html" />
    <link rel="prev" title="PyChemEngg User Guide" href="index.html" />
 
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-206775075-2']);
  _gaq.push(['_trackPageview']);
</script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PyChemEngg
          

          
          </a>

          
            
            
              <div class="version">
                0.1a11
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User Tutorial</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../heattransfer/index.html">Heat Transfer</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Mass Balances</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Physical Process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-1-how-to-define-a-physical-process">Example 1: How to <code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">a</span> <span class="pre">physical</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-2-how-to-attach-streams-to-a-process">Example 2: How to <code class="docutils literal notranslate"><span class="pre">attach</span> <span class="pre">streams</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-3-how-to-name-streams-attached-to-a-process">Example 3: How to <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">streams</span> <span class="pre">attached</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-4-how-to-print-physical-process-and-streams">Example 4: How to <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">physical</span> <span class="pre">process</span> <span class="pre">and</span> <span class="pre">streams</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-5-how-to-attach-stream-from-one-process-to-another-process">Example 5: How to <code class="docutils literal notranslate"><span class="pre">attach</span> <span class="pre">stream</span> <span class="pre">from</span> <span class="pre">one</span> <span class="pre">process</span> <span class="pre">to</span> <span class="pre">another</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-6-how-to-add-or-subtract-streams">Example 6: How to <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">or</span> <span class="pre">subtract</span> <span class="pre">streams</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-7-how-to-perform-degree-of-freedom-analysis">Example 7: How to <code class="docutils literal notranslate"><span class="pre">perform</span> <span class="pre">degree</span> <span class="pre">of</span> <span class="pre">freedom</span> <span class="pre">analysis</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-8-how-to-find-unknown-flow-rate-using-overall-balance">Example 8: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">flow</span> <span class="pre">rate</span> <span class="pre">using</span> <span class="pre">overall</span> <span class="pre">balance</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-9-how-to-find-unknown-fractions-using-fraction-balance">Example 9: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">fractions</span> <span class="pre">using</span> <span class="pre">fraction</span> <span class="pre">balance</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-10-how-to-set-extra-information">Example 10: How to <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">extra</span> <span class="pre">information</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-11-how-to-use-perform-component-massbalance">Example 11: How to <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">perform_component_massbalance()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-12-how-to-find-unknown-flowrates-and-fractions">Example 12: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">flowrates</span> <span class="pre">and</span> <span class="pre">fractions</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-13-how-to-use-built-in-solvesystem">Example 13: How to <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">built</span> <span class="pre">in</span> <span class="pre">solvesystem()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-14-how-to-solve-continuous-process">Example 14: How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">continuous</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-15-how-to-solve-batch-process">Example 15:  How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">batch</span> <span class="pre">process</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-16-how-to-solve-multiple-processes-with-extra-info-and-recycle">Example 16: How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">multiple</span> <span class="pre">processes</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span> <span class="pre">and</span> <span class="pre">recycle</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-17-example-mixer-with-extra-info">Example 17: Example <code class="docutils literal notranslate"><span class="pre">mixer</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-18-example-distillation-column-multiple-feeds">Example 18: Example <code class="docutils literal notranslate"><span class="pre">distillation</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">multiple</span> <span class="pre">feeds</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-19-example-distillation-column-extra-info">Example 19: Example <code class="docutils literal notranslate"><span class="pre">distillation</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">extra</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-20-example-extraction-distillation-with-extra-info">Example 20: Example <code class="docutils literal notranslate"><span class="pre">extraction-distillation</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-21-example-two-unit-process-with-extra-info">Example 21: Example <code class="docutils literal notranslate"><span class="pre">two</span> <span class="pre">unit</span> <span class="pre">process</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../autosummary_pychemengg.html">PyChemEngg API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyChemEngg</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">PyChemEngg User Guide</a> &raquo;</li>
        
      <li>Physical Process</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/userguide/massbalances/physicalmassbalance.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="../../autosummary_pychemengg.html" class="btn btn-neutral float-right" title="PyChemEngg API" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="PyChemEngg User Guide" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="physical-process">
<span id="physicalmassbalance"></span><h1>Physical Process<a class="headerlink" href="#physical-process" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The module <code class="docutils literal notranslate"><span class="pre">physicalmassbalance</span></code> allows the user to model
physical processes and perform mass/mole balances. The user can perform
mass balance or mole balance as long as units remain consistent.</p>
<div class="custom docutils container">
<p><strong>How to use</strong></p>
<p>It is recommended that the module be imported
as <code class="docutils literal notranslate"><span class="pre">from</span> <span class="pre">pychemengg.massbalances</span> <span class="pre">import</span> <span class="pre">physicalmassbalance</span> <span class="pre">as</span> <span class="pre">pmb</span></code>.</p>
</div>
<p>The following examples demonstrate how the module <code class="docutils literal notranslate"><span class="pre">physicalmassbalance</span></code>
can be used to solve mass/mole balances for physical processes.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="example-1-how-to-define-a-physical-process">
<h3>Example 1: How to <code class="docutils literal notranslate"><span class="pre">define</span> <span class="pre">a</span> <span class="pre">physical</span> <span class="pre">process</span></code><a class="headerlink" href="#example-1-how-to-define-a-physical-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">1.</span></code> Consider a mass/mole balance has to be performed
on a:</p>
<ol class="arabic simple">
<li><p>distillation column.</p></li>
<li><p>mixer</p></li>
</ol>
<p>How can these systems be set up?</p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 1</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>

<span class="c1"># Create instance of distillation column.</span>
<span class="n">distillationcolumn</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;distillationcolumn&quot;</span><span class="p">)</span>
<span class="c1"># On left hand side is the variable to which the</span>
<span class="c1"># instance of PhysicalProcess is assigned.</span>
<span class="c1"># Here, the variable is named &#39;distillationcolumn&#39;.</span>
<span class="c1"># Internally, the instance is named &#39;distillationcolumn&#39;, which</span>
<span class="c1"># is the string provided as argument to PhysicalProcess().</span>
<span class="c1"># These two need not be given the same names, but it is</span>
<span class="c1"># convenient if they have the same name.</span>
<span class="c1"># The instance stores the name of the process in the</span>
<span class="c1"># attribute .processname</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distillationcolumn</span><span class="o">.</span><span class="n">processname</span><span class="p">)</span>
<span class="c1"># The following gets printed on screen</span>
<span class="s1">&#39;distillationcolumn&#39;</span>

<span class="c1"># Create instance of mixer</span>
<span class="c1"># Here the name of variable and process are different for</span>
<span class="c1"># demonstration purposes.</span>
<span class="n">mixer</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer</span><span class="o">.</span><span class="n">processname</span><span class="p">)</span>
<span class="c1"># The following gets printed on screen</span>
<span class="s1">&#39;mixer1&#39;</span>
<span class="n">NOTE</span><span class="p">:</span> <span class="n">It</span> <span class="ow">is</span> <span class="n">better</span> <span class="n">to</span> <span class="n">use</span> <span class="n">same</span> <span class="n">names</span> <span class="n">to</span> <span class="n">prevent</span> <span class="n">errors</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="example-2-how-to-attach-streams-to-a-process">
<h3>Example 2: How to <code class="docutils literal notranslate"><span class="pre">attach</span> <span class="pre">streams</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">process</span></code><a class="headerlink" href="#example-2-how-to-attach-streams-to-a-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">2.</span></code> Consider a mass/mole balance has to be performed
on a mixer. Define the process and attach four streams with the
following data.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 2</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>

<span class="c1"># Create instance of mixer</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To attach streams use the method ‘attachstreams’</p>
<p><code class="docutils literal notranslate"><span class="pre">METHOD</span> <span class="pre">1:</span> <span class="pre">Attach</span> <span class="pre">streams</span> <span class="pre">one</span> <span class="pre">at</span> <span class="pre">time</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">S1</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">])</span>
<span class="c1"># NOTE: String has to be placed in [   ]</span>
<span class="c1"># NOTE: Use the same names for variable and instance name.</span>

<span class="c1"># To assign flowrate use .setflow(flowrate) method</span>
<span class="n">S1</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>

<span class="c1"># To assign fractions use .setfractions(list of fractions) method</span>
<span class="n">S1</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>

<span class="c1"># Attach 2nd stream</span>
<span class="n">S2</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S2&quot;</span><span class="p">])</span>
<span class="n">S2</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="n">S2</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">])</span>

<span class="c1"># Attach 3rd stream</span>
<span class="n">S3</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S3&quot;</span><span class="p">])</span>
<span class="n">S3</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">135</span><span class="p">)</span>
<span class="n">S3</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">])</span>

<span class="c1"># Attach 2nd stream</span>
<span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S4&quot;</span><span class="p">])</span>
<span class="n">S4</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">S4</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">])</span>

<span class="c1"># The mixer can be printed</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>

<span class="c1"># Output is as follows:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">METHOD</span> <span class="pre">2:</span> <span class="pre">Attach</span> <span class="pre">all</span> <span class="pre">streams</span> <span class="pre">at</span> <span class="pre">same</span> <span class="pre">time</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># Print the mixer1 process</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>

<span class="c1"># Output is as follows:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="example-3-how-to-name-streams-attached-to-a-process">
<h3>Example 3: How to <code class="docutils literal notranslate"><span class="pre">name</span> <span class="pre">streams</span> <span class="pre">attached</span> <span class="pre">to</span> <span class="pre">a</span> <span class="pre">process</span></code><a class="headerlink" href="#example-3-how-to-name-streams-attached-to-a-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">3.</span></code> Consider a mass/mole balance has to be performed
on a mixer. Let there be four streams with the
following data.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 3</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>

<span class="c1"># Create instance of mixer</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">METHOD</span> <span class="pre">1:</span> <span class="pre">Use</span> <span class="pre">somename</span> <span class="pre">for</span> <span class="pre">stream</span> <span class="pre">variable</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Here let the stream names be S1, S2, S3, S4</span>
<span class="n">S1</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">])</span>
<span class="c1"># The variable name on LHS allows the user</span>
<span class="c1"># to reference the strings in code.</span>
<span class="c1"># For example, to set its flow rate</span>
<span class="n">S1</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="c1"># Similarly other streams can be named</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">])</span>
</pre></div>
</div>
<p><strong>Limitation</strong>
Use of somename (say S1, S2, S3, S4, NaOH, HCl, crude etc) does not allow
easy identification of the process to which the stream
is attached.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">METHOD</span> <span class="pre">2:</span> <span class="pre">Use</span> <span class="pre">processname.somename</span> <span class="pre">for</span> <span class="pre">stream</span> <span class="pre">variable</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The streamname can be attached to the process name</span>
<span class="c1"># using the dot operator. This allows easy identification</span>
<span class="c1"># of the process to which a stream is attached</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S1</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">])</span>
<span class="c1"># Similarly other streams can be named</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S2</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">S3</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">])</span>
<span class="c1"># To assign flow rate:</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S2</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Limitation</strong> Use of processname.streamname does not provide a convenient
answer to whether the stream is entering or exiting
the process.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">METHOD</span> <span class="pre">3:</span> <span class="pre">Use</span> <span class="pre">processname.somename_in/out</span> <span class="pre">for</span> <span class="pre">stream</span> <span class="pre">variable</span></code></p>
<blockquote>
<div><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The streamname with &#39;in&#39; or &#39;out&#39; can be attached to the process name</span>
<span class="c1"># using the dot operator. This allows easy identification</span>
<span class="c1"># of the process to which a stream is attached and whether the stream</span>
<span class="c1"># is entering or exiting the process.</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S1_in</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S1_in&quot;</span><span class="p">])</span>
<span class="c1"># Similarly other streams can be named</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S2_in</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">S3_in</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">S4_out</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;S2_in&quot;</span><span class="p">,</span> <span class="s2">&quot;S3_in&quot;</span><span class="p">,</span> <span class="s2">&quot;S4_out&quot;</span><span class="p">])</span>
<span class="c1"># To assign flow rate:</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">S2_in</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<hr class="docutils" />
<div class="section" id="example-4-how-to-print-physical-process-and-streams">
<h3>Example 4: How to <code class="docutils literal notranslate"><span class="pre">print</span> <span class="pre">physical</span> <span class="pre">process</span> <span class="pre">and</span> <span class="pre">streams</span></code><a class="headerlink" href="#example-4-how-to-print-physical-process-and-streams" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">4.</span></code> Consider a mass/mole balance has to be performed
on a mixer. Let there be four streams with the
following data.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<p>Assign the streams and print the mixer and streams.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 4</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>To print the mixer ‘process’</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>

<span class="c1"># OUTPUT is</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
<p><strong>To print an individual ‘stream’</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">S1</span><span class="p">)</span>

<span class="c1"># OUTPUT is</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">S1</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">MIXER1</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="mi">200</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-5-how-to-attach-stream-from-one-process-to-another-process">
<h3>Example 5: How to <code class="docutils literal notranslate"><span class="pre">attach</span> <span class="pre">stream</span> <span class="pre">from</span> <span class="pre">one</span> <span class="pre">process</span> <span class="pre">to</span> <span class="pre">another</span> <span class="pre">process</span></code><a class="headerlink" href="#example-5-how-to-attach-stream-from-one-process-to-another-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">5.</span></code> Consider a stream exiting process1 and it enters
process2. The stream is assumed to be already attached to process1.
Let the stream from process1 be called ‘S1’, with flowrate=120 kg/s,
and mass fractions = [0.2, 0.15, 0.65]. How can it be attached to
process2?</p>
<p>To attach the stream use the <code class="docutils literal notranslate"><span class="pre">setequalto()</span></code> method.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 5</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">process1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;process1&quot;</span><span class="p">)</span>
<span class="n">process2</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;process2&quot;</span><span class="p">)</span>
<span class="n">process1</span><span class="o">.</span><span class="n">S1_out</span> <span class="o">=</span> <span class="n">process1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;process1.S1_out&quot;</span><span class="p">],</span> <span class="n">flowrates</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">120</span><span class="p">],</span> <span class="n">fractions</span> <span class="o">=</span><span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">]])</span>
<span class="c1"># Note that since S1 is exiting, it has a negative flowrate</span>
<span class="n">process2</span><span class="o">.</span><span class="n">S2_in</span> <span class="o">=</span> <span class="n">process2</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;process2.S2_out&quot;</span><span class="p">])</span>
<span class="c1"># print S1 and S2 to confirm their data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">process1</span><span class="o">.</span><span class="n">S1_out</span><span class="p">)</span>
<span class="c1"># Output is</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">process1</span><span class="o">.</span><span class="n">S1_out</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">PROCESS1</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="o">-</span><span class="mi">120</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>
<span class="nb">print</span><span class="p">(</span><span class="n">process2</span><span class="o">.</span><span class="n">S2_in</span><span class="p">)</span>
<span class="c1"># Output is</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">process2</span><span class="o">.</span><span class="n">S2_out</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">PROCESS2</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="n">Not</span> <span class="n">yet</span> <span class="n">defined</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Not yet defined&#39;</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>

<span class="c1"># Now apply setqualto()</span>
<span class="n">process2</span><span class="o">.</span><span class="n">S2_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">process1</span><span class="o">.</span><span class="n">S1_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="c1"># This means S2 will become equal to S1</span>
<span class="c1"># Since S2 is entering, it&#39;s flow showuld be positive.</span>
<span class="c1"># Therefore, flowdirection = &quot;+&quot;</span>
<span class="c1"># print S2 to confirm the method was successful</span>
<span class="nb">print</span><span class="p">(</span><span class="n">process2</span><span class="o">.</span><span class="n">S2_in</span><span class="p">)</span>
<span class="c1"># Output is</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">process2</span><span class="o">.</span><span class="n">S2_out</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">PROCESS2</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="mi">120</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.65</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-6-how-to-add-or-subtract-streams">
<h3>Example 6: How to <code class="docutils literal notranslate"><span class="pre">add</span> <span class="pre">or</span> <span class="pre">subtract</span> <span class="pre">streams</span></code><a class="headerlink" href="#example-6-how-to-add-or-subtract-streams" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">6.</span></code> Consider streams that enters a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<p>Apply stream addition to find S4.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 6</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="n">Smix</span> <span class="o">=</span> <span class="n">S1</span> <span class="o">+</span> <span class="n">S2</span> <span class="o">+</span> <span class="n">S3</span>
<span class="c1"># Output is</span>
    <span class="c1"># The following intermediate result is automatically printed for</span>
    <span class="c1"># each binary operation: Here it is S1 + S2</span>
    <span class="n">Total</span> <span class="n">flow</span> <span class="o">=</span>  <span class="mi">210</span>
    <span class="n">fractions</span> <span class="p">[</span><span class="mf">0.19523809523809524</span><span class="p">,</span> <span class="mf">0.29523809523809524</span><span class="p">,</span> <span class="mf">0.5095238095238095</span><span class="p">]</span>
    <span class="c1"># Next it is S1 + S2 + S3</span>
    <span class="n">Total</span> <span class="n">flow</span> <span class="o">=</span>  <span class="mi">345</span>
    <span class="n">fractions</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="mf">0.5057971014492754</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Smix</span><span class="p">)</span>
    <span class="c1"># This is the result of print(Smix)</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">temp</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">TEMPPROCESS</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="mi">345</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="mf">0.5057971014492754</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>
    <span class="c1"># Note that for Smix</span>
    <span class="c1"># streamname = temp</span>
    <span class="c1"># processname = tempprocess</span>
    <span class="c1"># User must store the calculated flowrate and fractions into S4</span>

<span class="n">S4</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="n">Smix</span><span class="o">.</span><span class="n">flowrate</span><span class="p">))</span>
<span class="c1"># Notice negative sign since S4 is exiting the process</span>
<span class="n">S4</span><span class="o">.</span><span class="n">setfractions</span><span class="p">((</span><span class="n">Smix</span><span class="p">)</span><span class="o">.</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># print S4 to check</span>
<span class="nb">print</span><span class="p">(</span><span class="n">S4</span><span class="p">)</span>
<span class="c1"># Output is</span>
    <span class="n">Stream</span><span class="p">:</span> <span class="n">S4</span>
    <span class="n">Attached</span> <span class="n">to</span> <span class="n">the</span> <span class="n">physical</span> <span class="n">process</span><span class="p">:</span> <span class="n">MIXER1</span>
    <span class="n">flowrate</span><span class="p">:</span> <span class="o">-</span><span class="mi">345</span>
    <span class="n">fractions</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="mf">0.5057971014492754</span><span class="p">]</span>
    <span class="n">extrainfo</span><span class="p">:</span> <span class="kc">None</span>

<span class="c1"># CHECK</span>
<span class="c1"># S4-(S1+S3) should give back flowrate and fractions of S2</span>
<span class="n">Ssubtract</span> <span class="o">=</span> <span class="n">S4</span><span class="o">-</span><span class="p">(</span><span class="n">S1</span><span class="o">+</span><span class="n">S3</span><span class="p">)</span>
<span class="c1"># Output is</span>
    <span class="c1"># The following intermediate result is automatically printed for</span>
    <span class="c1"># each binary operation: Here it is (S1 + S3)</span>
    <span class="n">Total</span> <span class="n">flow</span> <span class="o">=</span>  <span class="mi">335</span>
    <span class="n">fractions</span> <span class="p">[</span><span class="mf">0.28059701492537314</span><span class="p">,</span> <span class="mf">0.21940298507462686</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
    <span class="c1"># And this is the result of S4-(S1+S3)</span>
    <span class="n">Total</span> <span class="n">flow</span> <span class="o">=</span>  <span class="mi">10</span>
    <span class="n">fractions</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">]</span>
    <span class="c1"># Indeed these flowrate and fractions are the same as for S2</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-7-how-to-perform-degree-of-freedom-analysis">
<h3>Example 7: How to <code class="docutils literal notranslate"><span class="pre">perform</span> <span class="pre">degree</span> <span class="pre">of</span> <span class="pre">freedom</span> <span class="pre">analysis</span></code><a class="headerlink" href="#example-7-how-to-perform-degree-of-freedom-analysis" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">7.</span></code> Consider streams that enters a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<p>What does the degree of freedom analysis look like?</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 7</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># To perform degree of freedom analysis use degreeoffreedom()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="c1"># Output is</span>
    <span class="o">======================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">======================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">4</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">4</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">--------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">--------------------------------------------</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-8-how-to-find-unknown-flow-rate-using-overall-balance">
<h3>Example 8: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">flow</span> <span class="pre">rate</span> <span class="pre">using</span> <span class="pre">overall</span> <span class="pre">balance</span></code><a class="headerlink" href="#example-8-how-to-find-unknown-flow-rate-using-overall-balance" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">8.</span></code> Consider streams that enters a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<p>Find the unknown flow rate using overall balance and update the
unknown flowrate. Do not use the built in solvesystem() solver.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 8</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># To find unknown flowrate using ΣF = 0, where F = flowrates use find_unknownflowrates()</span>
<span class="n">unknownflow</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">find_unknownflowrate</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unknownflow</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="p">[[</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mf">345.0</span><span class="p">]]</span>
<span class="c1"># To update the stream using the newly found flowrate use update_streamflowrates()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">update_streamflowrates</span><span class="p">(</span><span class="n">unknownflow</span><span class="p">)</span>
<span class="c1"># The following gets printed on screen</span>
    <span class="n">For</span>  <span class="s2">&quot; mixer1 &quot;</span> <span class="p">:</span> <span class="n">the</span> <span class="n">stream</span> <span class="s2">&quot; S4 &quot;</span> <span class="n">has</span> <span class="n">new</span> <span class="n">flowrate</span> <span class="o">=</span> <span class="o">-</span><span class="mf">345.0</span>
<span class="c1"># Confirm S4 has been updated by printing mixer1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">345.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
<p><strong>NOTE:</strong> This approach only works if there is just one unknown flowrate.</p>
</div>
<hr class="docutils" />
<div class="section" id="example-9-how-to-find-unknown-fractions-using-fraction-balance">
<h3>Example 9: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">fractions</span> <span class="pre">using</span> <span class="pre">fraction</span> <span class="pre">balance</span></code><a class="headerlink" href="#example-9-how-to-find-unknown-fractions-using-fraction-balance" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">9.</span></code> Consider streams that enters a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 11%" />
<col style="width: 17%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=”x”, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=”x”, c3=”x”</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>-345</p></td>
<td><p>c1=0.2753623188405797, c2=0.21884057971014492, c3=”x”</p></td>
</tr>
</tbody>
</table>
<p>Find the unknown fractions and update the fractions with the new values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 9</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="o">-</span><span class="mi">345</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># To find unknown fractions using Σx = 1, where x = fractions, use find_unknownfractions()</span>
<span class="n">unknownfractions</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">find_unknownfractions</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unknownfractions</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="p">[[</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;S1&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.19999999999999996</span><span class="p">],</span>
    <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;S2&#39;</span><span class="p">,</span> <span class="s1">&#39;There are no missing fractions.&#39;</span><span class="p">],</span>
    <span class="p">[</span><span class="kc">False</span><span class="p">,</span> <span class="s1">&#39;S3&#39;</span><span class="p">,</span> <span class="s2">&quot;More than one &#39;x&#39; unknown fractions in the stream. Σx = 1 is insufficient to find them.&quot;</span><span class="p">],</span>
    <span class="p">[</span><span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;S4&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">0.5057971014492754</span><span class="p">]]</span>
<span class="c1"># To update the stream using the newly found fractions use update_streamfractions()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">update_streamfractions</span><span class="p">(</span><span class="n">unknownfractions</span><span class="p">)</span>
<span class="c1"># The following gets printed on screen</span>
    <span class="n">For</span>  <span class="s2">&quot; mixer1 &quot;</span> <span class="p">:</span> <span class="n">the</span> <span class="n">stream</span> <span class="s2">&quot; S1 &quot;</span> <span class="n">The</span> <span class="n">new</span> <span class="n">component</span> <span class="n">fraction</span> <span class="o">@</span> <span class="n">position</span> <span class="o">=</span> <span class="s2">&quot; 0 &quot;</span> <span class="ow">is</span> <span class="n">now</span> <span class="o">=</span>  <span class="mf">0.19999999999999996</span>
    <span class="n">For</span>  <span class="s2">&quot; mixer1 &quot;</span> <span class="p">:</span> <span class="n">the</span> <span class="n">stream</span> <span class="s2">&quot; S2 &quot;</span> <span class="n">There</span> <span class="n">are</span> <span class="n">no</span> <span class="n">missing</span> <span class="n">fractions</span><span class="o">.</span>
    <span class="n">For</span>  <span class="s2">&quot; mixer1 &quot;</span> <span class="p">:</span> <span class="n">the</span> <span class="n">stream</span> <span class="s2">&quot; S3 &quot;</span> <span class="n">More</span> <span class="n">than</span> <span class="n">one</span> <span class="s1">&#39;x&#39;</span> <span class="n">unknown</span> <span class="n">fractions</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">stream</span><span class="o">.</span> <span class="n">Σx</span> <span class="o">=</span> <span class="mi">1</span> <span class="ow">is</span> <span class="n">insufficient</span> <span class="n">to</span> <span class="n">find</span> <span class="n">them</span><span class="o">.</span>
    <span class="n">For</span>  <span class="s2">&quot; mixer1 &quot;</span> <span class="p">:</span> <span class="n">the</span> <span class="n">stream</span> <span class="s2">&quot; S4 &quot;</span> <span class="n">The</span> <span class="n">new</span> <span class="n">component</span> <span class="n">fraction</span> <span class="o">@</span> <span class="n">position</span> <span class="o">=</span> <span class="s2">&quot; 2 &quot;</span> <span class="ow">is</span> <span class="n">now</span> <span class="o">=</span>  <span class="mf">0.5057971014492754</span>
<span class="c1"># Confirm all streams have been updated by printing mixer1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="o">-</span><span class="mf">345.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2754&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2188&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5058&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-10-how-to-set-extra-information">
<h3>Example 10: How to <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">extra</span> <span class="pre">information</span></code><a class="headerlink" href="#example-10-how-to-set-extra-information" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">10.</span></code> Sometimes, additional information is given that can help formulate equations
besides the following ones:</p>
<ul class="simple">
<li><p>Overall balance: <span class="math">\(ΣF\)</span> = 0</p></li>
<li><p>Component fraction balance: <span class="math">\(Σx\)</span> =  1</p></li>
<li><p>Component balance : <span class="math">\((ΣFx)_{in} - (ΣFx)_{out}\)</span> = 0</p></li>
</ul>
<p>These equations often represent either:</p>
<ul class="simple">
<li><p>total mass/mole flowrate relationship between streams, or</p></li>
<li><p>mass/mole relationship between components in different streams</p></li>
</ul>
<p>Consider the following mixer streams.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 16%" />
<col style="width: 25%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=0.2, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>unknown</p></td>
<td><p>unknown</p></td>
</tr>
</tbody>
</table>
<p>Express the following relationships:</p>
<ul class="simple">
<li><p>Flow rate of S1 is 20 times that of S2</p></li>
<li><p>Flow rate of component 1 in stream S3 is 1.35 times its flowrate in stream S1</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 10</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># Confirm the system is properly set up using print(mixer1)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>

<span class="c1"># To set extra info use setextrainfo()</span>
<span class="c1"># Flow rate of S2 is 20 times that of S1</span>
<span class="n">S1</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;S1=20*S2&quot;</span><span class="p">])</span>
<span class="c1"># Confirm by printing mixer1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;S1=20*S2&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>

<span class="c1"># Flow rate of component 1 in stream S3 is 1.35 times its flowrate in stream S1</span>
<span class="n">S3</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;1:S3=1.35*S1&quot;</span><span class="p">])</span>
<span class="c1"># Confirm by printing mixer1</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;S1=20*S2&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1:S3=1.35*S1&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-11-how-to-use-perform-component-massbalance">
<h3>Example 11: How to <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">perform_component_massbalance()</span></code><a class="headerlink" href="#example-11-how-to-use-perform-component-massbalance" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">11.</span></code> Consider streams that enter a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 11%" />
<col style="width: 17%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=”x”, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>10</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>135</p></td>
<td><p>c1=0.4, c2=0.1, c3=”x”</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>-345</p></td>
<td><p>c1=0.2753623188405797, c2=0.21884057971014492, c3=”x”</p></td>
</tr>
</tbody>
</table>
<p>Perform a component mass balance and find the unknown “x” fractions. Note that there are three
unknown fractions, therefore, the three component mass balances <span class="math">\((ΣF_ix_{i,component})\)</span> = 0;
where i = stream index, should be sufficient. Do not use built in solvesystem() function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 11</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="c1"># The following methodology is typically used to set up the process.</span>
<span class="c1">#</span>
<span class="c1"># streams = [&quot;S1&quot;, &quot;S2&quot;, &quot;S3&quot;, &quot;S4&quot;]</span>
<span class="c1"># flowrates = [200, 10, 135, -345]</span>
<span class="c1"># fractions = [[&quot;x&quot;, 0.3, 0.5], [0.1, 0.2, 0.7], [0.4, 0.1, &quot;x&quot;], [0.2753623188405797, 0.21884057971014492, &quot;x&quot;]]</span>
<span class="c1"># S1, S2, S3, S4 = mixer1.attachstreams(streamnames=streams, flowrates=flowrates, fractions=fractions)</span>
<span class="c1">#</span>
<span class="c1"># Implement the above inside a function as shown below.</span>
<span class="c1"># define a function that takes x-fractions as input</span>
<span class="k">def</span> <span class="nf">massbalances</span><span class="p">(</span><span class="n">xfracs</span><span class="p">):</span>
<span class="c1"># There are three unknowns therefore the xfracs will be an array with three elements</span>
<span class="c1"># xfracs[0], xfracs[1], xfracs[2]</span>
<span class="c1"># Assign them to unknowns below, in any order</span>
    <span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
    <span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">135</span><span class="p">,</span> <span class="o">-</span><span class="mi">345</span><span class="p">]</span>
    <span class="c1"># Assign the xfracs parameter to unknown &#39;x&#39; locations</span>
    <span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="n">xfracs</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">xfracs</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="n">xfracs</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]</span>
    <span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
    <span class="n">balance</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">perform_component_massbalance</span><span class="p">()</span>
    <span class="c1"># perform_component_massbalance()</span>
    <span class="c1"># The balance is a numpy array.</span>
    <span class="c1"># There are three components, so balance contains three elements.</span>
    <span class="c1"># Each element of this array should be zero</span>
    <span class="c1"># These each become equations to be solved (meaning each must be made = 0 with the correct choice of xfracs)</span>
    <span class="k">return</span> <span class="n">balance</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">balance</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">balance</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>

<span class="c1"># The above function returns the component balance</span>
<span class="c1"># Solve the function using a solver.</span>
<span class="c1"># The &#39;leastsq&#39; solver has been found to be most robust</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">leastsq</span>
<span class="c1"># Guess values are needed. Since all unknowns are &#39;x&#39; mass fractions</span>
<span class="c1"># let these each be 0.5</span>
<span class="n">xfrac_guess</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">leastsq</span><span class="p">(</span><span class="n">massbalances</span><span class="p">,</span> <span class="n">xfrac_guess</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The unknowns are:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># OUTPUT is:</span>
<span class="n">The</span> <span class="n">unknowns</span> <span class="n">are</span><span class="p">:</span>

<span class="mf">0.19999999999999996</span>
<span class="mf">0.5</span>
<span class="mf">0.5057971014492754</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-12-how-to-find-unknown-flowrates-and-fractions">
<h3>Example 12: How to <code class="docutils literal notranslate"><span class="pre">find</span> <span class="pre">unknown</span> <span class="pre">flowrates</span> <span class="pre">and</span> <span class="pre">fractions</span></code><a class="headerlink" href="#example-12-how-to-find-unknown-flowrates-and-fractions" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">12.</span></code> Consider streams that enters a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 11%" />
<col style="width: 17%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=”x”, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>“F”</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>“F”</p></td>
<td><p>c1=0.4, c2=”x”, c3=”x”</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>-345</p></td>
<td><p>c1=0.2753623188405797, c2=0.21884057971014492, c3=”x”</p></td>
</tr>
</tbody>
</table>
<p>Find the unknown “F” and “x”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 12</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>

<span class="c1"># The following methodology is used to set up the process.</span>
<span class="c1">#</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">345</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1"># Perform degree of freedom analysis</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># Output is:</span>
    <span class="o">======================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">======================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">6</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">6</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">6</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">6</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">--------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">--------------------------------------------</span>

<span class="c1"># Degree of freedom shows the system can be solved</span>
<span class="c1"># Implement the above system definition inside a function as shown below.</span>
<span class="c1"># Define a function that takes x-fractions and flowrates as input</span>
<span class="k">def</span> <span class="nf">massbalances</span><span class="p">(</span><span class="n">xf</span><span class="p">):</span>
<span class="c1"># There are six unknowns therefore the xf will be an array with six elements</span>
<span class="c1"># xf[0], xf[1], xf[2], xf[3], xf[4], xf[5]</span>
<span class="c1"># Assign them to unknowns below, in any order</span>
    <span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
    <span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="n">xf</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xf</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="mi">345</span><span class="p">]</span>
    <span class="c1"># Assign the xfracs parameter to unknown &#39;x&#39; locations</span>
    <span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="n">xf</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="n">xf</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">xf</span><span class="p">[</span><span class="mi">4</span><span class="p">]],</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="n">xf</span><span class="p">[</span><span class="mi">5</span><span class="p">]]]</span>
    <span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

    <span class="c1"># There are six unknowns, therefore, six equations are needed</span>
    <span class="c1"># Three will be the three component balances</span>
    <span class="n">componentbalance</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">perform_component_massbalance</span><span class="p">()</span>
    <span class="c1"># The balance is a numpy array.</span>
    <span class="c1"># There are three components, so balance contains three elements: componentbalance[0], componentbalance[1], componentbalance[2]</span>
    <span class="c1"># Each element of this array should be zero</span>
    <span class="c1"># These each become equations to be solved (meaning each must be made = 0 with the correct choice of xf)</span>
    <span class="c1"># Thus equations to solve become</span>
    <span class="c1"># componentbalance[0] = 0   ...... (1)</span>
    <span class="c1"># componentbalance[1] = 0   ...... (2)</span>
    <span class="c1"># componentbalance[2] = 0   ...... (3)</span>

    <span class="c1"># The other three equations are going to be (Σx) = 1 for each stream</span>
    <span class="n">fractionsums</span> <span class="o">=</span> <span class="p">[</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">fractions</span><span class="p">]</span>
    <span class="c1"># This will make a list with each element being the sum of fractions for each stream.</span>
    <span class="c1"># Since there are four streams, there are four elements in fractionsums</span>
    <span class="c1"># fractionsums[0], fractionsums[1], fractionsums[2], fractionsums[3]</span>
    <span class="c1"># Out of these four, the ones that have unknown &#39;x&#39; should be selected</span>
    <span class="c1"># Thus fractionsums[1] is not selected</span>
    <span class="c1"># Equations to solve become</span>
    <span class="c1"># fractionsums[0] - 1 = 0   ...... (4)</span>
    <span class="c1"># fractionsums[2] - 1 = 0   ...... (5)</span>
    <span class="c1"># fractionsums[3] - 1 = 0   ...... (6)</span>
    <span class="c1"># Return equations 1 through 6</span>
    <span class="k">return</span> <span class="n">componentbalance</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">componentbalance</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">componentbalance</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">fractionsums</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fractionsums</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">fractionsums</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>


<span class="c1"># The above function returns the equations</span>
<span class="c1"># Solve the function using a solver.</span>
<span class="c1"># The &#39;leastsq&#39; solver has been found to be most robust</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">leastsq</span>
<span class="c1"># Guess values are needed. Since first two xf are assigned to flowrate and remaining to &#39;x&#39;</span>
<span class="c1"># Let guess be</span>
<span class="n">xf_guess</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="mi">345</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">]</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">leastsq</span><span class="p">(</span><span class="n">massbalances</span><span class="p">,</span> <span class="n">xf_guess</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The unknowns are:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">4</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">5</span><span class="p">])</span>

<span class="c1"># OUTPUT is:</span>
<span class="n">The</span> <span class="n">unknowns</span> <span class="n">are</span><span class="p">:</span>
<span class="mf">9.999999999999952</span> <span class="c1"># flowrate of S2</span>
<span class="mf">135.00000000000003</span> <span class="c1"># flowrate of S3</span>
<span class="mf">0.19999999999999996</span> <span class="c1"># fraction of S1</span>
<span class="mf">0.09999999999999996</span> <span class="c1"># fraction of S3</span>
<span class="mf">0.5000000000000003</span> <span class="c1"># fraction of S3</span>
<span class="mf">0.5057971014492755</span> <span class="c1"># fraction of S4</span>
<span class="c1"># User should look at the function and track what each variable means</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-13-how-to-use-built-in-solvesystem">
<h3>Example 13: How to <code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">built</span> <span class="pre">in</span> <span class="pre">solvesystem()</span></code><a class="headerlink" href="#example-13-how-to-use-built-in-solvesystem" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">13.</span></code> Consider streams that enter a mixer.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 11%" />
<col style="width: 17%" />
<col style="width: 58%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Stream name</p></th>
<th class="head"><p>In/Out</p></th>
<th class="head"><p>Flowrate (kg/s)</p></th>
<th class="head"><p>Component mass fraction</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>S1</p></td>
<td><p>In</p></td>
<td><p>200</p></td>
<td><p>c1=”x”, c2=0.3, c3=0.5</p></td>
</tr>
<tr class="row-odd"><td><p>S2</p></td>
<td><p>In</p></td>
<td><p>“F”</p></td>
<td><p>c1=0.1, c2=0.2, c3=0.7</p></td>
</tr>
<tr class="row-even"><td><p>S3</p></td>
<td><p>In</p></td>
<td><p>“F”</p></td>
<td><p>c1=0.4, c2=”x”, c3=”x”</p></td>
</tr>
<tr class="row-odd"><td><p>S4</p></td>
<td><p>Out</p></td>
<td><p>-345</p></td>
<td><p>c1=0.2753623188405797, c2=0.21884057971014492, c3=”x”</p></td>
</tr>
</tbody>
</table>
<p>Find the unknown “F” and “x” using built in solver solvesystem().</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 13</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>
<span class="c1"># Set up the process.</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;S1&quot;</span><span class="p">,</span> <span class="s2">&quot;S2&quot;</span><span class="p">,</span> <span class="s2">&quot;S3&quot;</span><span class="p">,</span> <span class="s2">&quot;S4&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">200</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">345</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.2753623188405797</span><span class="p">,</span> <span class="mf">0.21884057971014492</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">S1</span><span class="p">,</span> <span class="n">S2</span><span class="p">,</span> <span class="n">S3</span><span class="p">,</span> <span class="n">S4</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1"># Solve using solvesystem() function</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># OUTPUT is:</span>
    <span class="o">======================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">======================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">6</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">6</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">6</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">6</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">--------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER1</span>
    <span class="o">--------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span> <span class="c1"># Here solution is the returned object</span>
<span class="c1"># OUTPUT is:</span>
    <span class="o">============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">MIXER1</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.7000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">135.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">S4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">345.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2754&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2188&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5058&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-14-how-to-solve-continuous-process">
<h3>Example 14: How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">continuous</span> <span class="pre">process</span></code><a class="headerlink" href="#example-14-how-to-solve-continuous-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">14.</span></code> 10 kg/s of a 5% (by wt) ethanol (E) solutions is produced by mixing
two streams from two tanks that contain 1% and 41% ethanol, respectively (rest is water (W))
all on weight basis. How much is needed from each tank?</p>
<a class="reference internal image-reference" href="../../_images/continuous_ethanol_mixer.png"><img alt="../../_images/continuous_ethanol_mixer.png" class="align-center" src="../../_images/continuous_ethanol_mixer.png" style="width: 303.59999999999997px; height: 187.5px;" /></a>
<p>Find the unknown flowrates and weight fractions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 14</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">ethanolmixer</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;ethanolmixer&quot;</span><span class="p">)</span>
<span class="c1"># Set up the process.</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;M1&quot;</span><span class="p">,</span> <span class="s2">&quot;M2&quot;</span><span class="p">,</span> <span class="s2">&quot;M3&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.01</span><span class="p">,</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.41</span><span class="p">,</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">M1</span><span class="p">,</span> <span class="n">M2</span><span class="p">,</span> <span class="n">M3</span> <span class="o">=</span> <span class="n">ethanolmixer</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1"># Solve using solvesystem() function</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">ethanolmixer</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># OUTPUT is:</span>
    <span class="o">============================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">ETHANOLMIXER</span>
    <span class="o">============================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">5</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">5</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">5</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">5</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">--------------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">ETHANOLMIXER</span>
    <span class="o">--------------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span> <span class="c1"># Here solution is the returned object</span>

<span class="c1"># OUTPUT is:</span>
    <span class="o">==================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">ETHANOLMIXER</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">==================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">M1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">9.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0100&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9900&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">M2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">1.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4100&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5900&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">M3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0500&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9500&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-15-how-to-solve-batch-process">
<h3>Example 15:  How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">batch</span> <span class="pre">process</span></code><a class="headerlink" href="#example-15-how-to-solve-batch-process" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">15.</span></code> From clean water and an aqueous solution with 5% S(NaCl),
we want to produce 1 kg of 2% NaCl (all weight %). How much of each stream is required?</p>
<a class="reference internal image-reference" href="../../_images/batch_salt_mixer.png"><img alt="../../_images/batch_salt_mixer.png" class="align-center" src="../../_images/batch_salt_mixer.png" style="width: 352.2px; height: 141.0px;" /></a>
<p>Find the unknown flowrates and weight fractions.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 15</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">saltmixer</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;saltmixer&quot;</span><span class="p">)</span>
<span class="c1"># Set up the process.</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;salt&quot;</span><span class="p">,</span> <span class="s2">&quot;product&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.05</span><span class="p">,</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.02</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">water</span><span class="p">,</span> <span class="n">salt</span><span class="p">,</span> <span class="n">product</span> <span class="o">=</span> <span class="n">saltmixer</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1"># Solve using solvesystem() function</span>
<span class="n">solution</span> <span class="o">=</span> <span class="n">saltmixer</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># OUTPUT is:</span>
    <span class="o">=========================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">SALTMIXER</span>
    <span class="o">=========================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">4</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">4</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">-----------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">SALTMIXER</span>
    <span class="o">-----------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">solution</span><span class="p">)</span>  <span class="c1"># Here solution is the returned object</span>
<span class="c1"># OUTPUT is:</span>
    <span class="o">===============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">SALTMIXER</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">===============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">water</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">0.60</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">salt</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">0.40</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0500&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9500&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">product</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">1.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0200&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9800&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">-----------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-16-how-to-solve-multiple-processes-with-extra-info-and-recycle">
<h3>Example 16: How to <code class="docutils literal notranslate"><span class="pre">solve</span> <span class="pre">multiple</span> <span class="pre">processes</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span> <span class="pre">and</span> <span class="pre">recycle</span></code><a class="headerlink" href="#example-16-how-to-solve-multiple-processes-with-extra-info-and-recycle" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">16.</span></code> 5000 kg/h of an aqueous solution with 20% (all weight %) potassium salt
(abbreviated as K) is mixed with a recycle stream. This is then sent to an evaporator
to remove water such that the outlet from evaporator contains 35% K. This stream
is then sent to crystallization/filtration units. The filtrate with 30% K is recycled.
The product comprises the crystals (filter cake), which is mostly solid crystals (K)
and filtrate stream. The filtrate stream comprises 1/26th of the total product.</p>
<a class="reference internal image-reference" href="../../_images/multiple_processes_with_recycle.png"><img alt="../../_images/multiple_processes_with_recycle.png" class="align-center" src="../../_images/multiple_processes_with_recycle.png" style="width: 732.0px; height: 238.5px;" /></a>
<p>Find the unknown flowrates and weight fractions.</p>
<p>SOLUTION:</p>
<p>To solve this problem,</p>
<ul class="simple">
<li><p>first define the different processes and assign the streams</p></li>
<li><p>perform degree of freedom analysis to determine what part can be solved</p></li>
<li><p>solve that portion</p></li>
<li><p>again perform degree of freedom analysis to see what parts can be solved</p></li>
<li><p>repeat the process until unknowns are computed.</p></li>
<li><p>NOTE: extrainfo is given as: Filtrate = 1/26(Filtrate + Crystals)</p></li>
<li><p>This can be simplified to : Crystals = 25*Filtrate</p></li>
<li><p>The extrainfo can be attached to any stream really, but it makes sense if it is attached to Filtrate or Crystals</p></li>
<li><p>We will attach it to Crystals</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 16</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="c1"># define all processes</span>
<span class="n">mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer1&quot;</span><span class="p">)</span>
<span class="n">evaporator</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;evaporator&quot;</span><span class="p">)</span>
<span class="n">crystallizer</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;crystallizer&quot;</span><span class="p">)</span>
<span class="n">splitter2</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;splitter2&quot;</span><span class="p">)</span>
<span class="c1"># Also define an overall process (red line - (a) in figure)</span>
<span class="n">overall</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;overall&quot;</span><span class="p">)</span>
<span class="c1"># And define for boundary (b) over evaporator  + mixer1</span>
<span class="n">evap_mixer1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;evap_mixer1&quot;</span><span class="p">)</span>

<span class="c1"># Now assign streams to each process</span>
<span class="c1"># for mixer1</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;feed&quot;</span><span class="p">,</span> <span class="s2">&quot;recyclefiltrate_in&quot;</span><span class="p">,</span> <span class="s2">&quot;s1_out&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">feed</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">recyclefiltrate_in</span><span class="p">,</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">s1_out</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># NOTE the use of dot operator so that it is convenient to track which stream</span>
<span class="c1"># belongs to which process.</span>

<span class="c1">#for evaporator</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;s1_in&quot;</span><span class="p">,</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;concentrate_out&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.35</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">evaporator</span><span class="o">.</span><span class="n">s1_in</span><span class="p">,</span> <span class="n">evaporator</span><span class="o">.</span><span class="n">water</span><span class="p">,</span> <span class="n">evaporator</span><span class="o">.</span><span class="n">concentrate_out</span> <span class="o">=</span> <span class="n">evaporator</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1">#for crystallizer</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;concentrate_in&quot;</span><span class="p">,</span> <span class="s2">&quot;s2_out&quot;</span><span class="p">,</span> <span class="s2">&quot;crystals&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.35</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="n">crystallizer</span><span class="o">.</span><span class="n">concentrate_in</span><span class="p">,</span> <span class="n">crystallizer</span><span class="o">.</span><span class="n">s2_out</span><span class="p">,</span> <span class="n">crystallizer</span><span class="o">.</span><span class="n">crystals</span> <span class="o">=</span> <span class="n">crystallizer</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1">#for splitter 2</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;s2_in&quot;</span><span class="p">,</span> <span class="s2">&quot;recyclefiltrate_out&quot;</span><span class="p">,</span> <span class="s2">&quot;filtrate&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">s2_in</span><span class="p">,</span> <span class="n">splitter2</span><span class="o">.</span><span class="n">recyclefiltrate_out</span><span class="p">,</span> <span class="n">splitter2</span><span class="o">.</span><span class="n">filtrate</span> <span class="o">=</span> <span class="n">splitter2</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>

<span class="c1"># overall ... boundary (a)</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;feed&quot;</span><span class="p">,</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;crystals&quot;</span><span class="p">,</span> <span class="s2">&quot;filtrate&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">extrainfo</span> <span class="o">=</span> <span class="p">[[],</span> <span class="p">[],</span> <span class="p">[],</span> <span class="p">[</span><span class="s2">&quot;crystals=25*filtrate&quot;</span><span class="p">]]</span>
<span class="n">overall</span><span class="o">.</span><span class="n">feed</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">water</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">crystals</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">filtrate</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">,</span> <span class="n">extrainfos</span><span class="o">=</span><span class="n">extrainfo</span><span class="p">)</span>

<span class="c1"># evap_mixer1 ... boundary (b)</span>
<span class="n">streams</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;feed&quot;</span><span class="p">,</span> <span class="s2">&quot;recyclefiltrate_in&quot;</span><span class="p">,</span> <span class="s2">&quot;water&quot;</span><span class="p">,</span> <span class="s2">&quot;concentrate_out&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5000</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.2</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.3</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.35</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">evap_mixer1</span><span class="o">.</span><span class="n">feed</span><span class="p">,</span> <span class="n">evap_mixer1</span><span class="o">.</span><span class="n">recyclefiltrate_in</span><span class="p">,</span> <span class="n">evap_mixer1</span><span class="o">.</span><span class="n">water</span><span class="p">,</span> <span class="n">evap_mixer1</span><span class="o">.</span><span class="n">concentrate_out</span> <span class="o">=</span> <span class="n">evap_mixer1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streams</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>


<span class="c1"># perform degrees of freedom on all systems</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">crystallizer</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">evaporator</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">evap_mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># From degree of freedom analysis it is clear only &quot;overall&quot;</span>
<span class="c1"># can be solved. Therefore, solve &quot;overall&quot; first.</span>
<span class="n">overall_solution</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># Print the original &quot;overall&quot; system</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall</span><span class="p">)</span>
<span class="c1"># Print the solution to overall</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall_solution</span><span class="p">)</span>

<span class="c1"># # To find the other unknowns one must use streams computed from</span>
<span class="c1"># # &quot;overall_solution&quot; to update information of other streams.</span>
<span class="c1"># # Thus, update &quot;feed&quot;, &quot;water&quot;, &quot;filtrate&quot; and &quot;crystals&quot; streams</span>
<span class="c1"># # that interconnect processes.</span>
<span class="c1"># # The setequalto() function can be used for this purpose</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">feed</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">feed</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">evaporator</span><span class="o">.</span><span class="n">water</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">water</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">crystallizer</span><span class="o">.</span><span class="n">crystals</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">crystals</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">filtrate</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">filtrate</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">evap_mixer1</span><span class="o">.</span><span class="n">water</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">water</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>

<span class="c1"># Again perform degree of freedom analysis</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">crystallizer</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">evaporator</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">evap_mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># The degree of freedom analysis shows that splitter2, crystallizer, and evap_mixer1 can be solved</span>
<span class="c1"># First print them to check</span>
<span class="nb">print</span><span class="p">(</span><span class="n">crystallizer</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">splitter2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">evap_mixer1</span><span class="p">)</span>

<span class="c1"># Solve these systems</span>
<span class="n">splitter2_soln</span> <span class="o">=</span> <span class="n">splitter2</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="n">crystallizer_soln</span> <span class="o">=</span> <span class="n">crystallizer</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="n">evap_mixer1_soln</span> <span class="o">=</span> <span class="n">evap_mixer1</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>

<span class="c1"># print the solutions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">splitter2_soln</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">crystallizer_soln</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">evap_mixer1_soln</span><span class="p">)</span>

<span class="c1"># One stream is connecting crystallizer and evaporator</span>
<span class="c1"># and this is concentrate_out &lt;-----&gt; concentrate_in</span>
<span class="c1"># This stream has the same flowrate when independently</span>
<span class="c1"># the evap_mixer1 and crystallizer are solved.</span>
<span class="c1"># Similarly, crystallizer and splitter2 are connected via</span>
<span class="c1"># s2_out &lt;-----&gt; s2_in.</span>
<span class="c1"># This stream gave different results for the crystallizer and splitter2</span>
<span class="c1"># This means the splitter2 system solution is not correct.</span>

<span class="c1"># Use the data from crystallizer and evap_mixer1 solutions to complete</span>
<span class="c1"># other stream data.</span>

<span class="n">mixer1</span><span class="o">.</span><span class="n">recyclefiltrate_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">evap_mixer1_soln</span><span class="o">.</span><span class="n">recyclefiltrate_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">recyclefiltrate_out</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">evap_mixer1_soln</span><span class="o">.</span><span class="n">recyclefiltrate_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">s2_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">crystallizer_soln</span><span class="o">.</span><span class="n">s2_out</span><span class="p">,</span> <span class="n">flowdirection</span> <span class="o">=</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>



<span class="c1"># Again perform degree of freedom analysis</span>
<span class="n">splitter2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">mixer1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># Degree of analysis shows splitter2 is already fully solved</span>
<span class="c1"># and mixer1 is solvable</span>

<span class="c1"># Print them first</span>
<span class="nb">print</span><span class="p">(</span><span class="n">splitter2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1</span><span class="p">)</span>

<span class="c1"># Solve mixer1</span>
<span class="n">mixer1_soln</span> <span class="o">=</span> <span class="n">mixer1</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># Print mixer1 solution</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer1_soln</span><span class="p">)</span>
<span class="c1"># This completes the solution</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-17-example-mixer-with-extra-info">
<h3>Example 17: Example <code class="docutils literal notranslate"><span class="pre">mixer</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code><a class="headerlink" href="#example-17-example-mixer-with-extra-info" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">17.</span></code> Pure water is mixed with 1000 kg/h of pure NaOH to produce
product. The water flow rate is 0.9 times the flow rate of the product.</p>
<a class="reference internal image-reference" href="../../_images/naoh_mixer.png"><img alt="../../_images/naoh_mixer.png" class="align-center" src="../../_images/naoh_mixer.png" style="width: 352.2px; height: 174.6px;" /></a>
<p>Find the unknown flowrates and weight fractions.</p>
<p>SOLUTION:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 17</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="c1"># define mixer</span>
<span class="n">Mixer_NaOH</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Mixer_NaOH&quot;</span><span class="p">)</span>
<span class="c1"># Attach streams</span>
<span class="c1"># In this example each stream is attached one at a time</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Water</span> <span class="o">=</span> <span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Water&quot;</span><span class="p">])</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Water</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Water</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Water</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;Water=0.9*Product&quot;</span><span class="p">])</span>
<span class="c1"># The extra information can be attached to any stream.</span>
<span class="c1"># Here it is attached to &#39;Water&#39; stream.</span>
<span class="c1"># User can attach it to other streams to test the result.</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">NaOH</span> <span class="o">=</span> <span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NaOH&quot;</span><span class="p">])</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">NaOH</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">NaOH</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">])</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Product</span> <span class="o">=</span> <span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Product&quot;</span><span class="p">])</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Product</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">Product</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">Mixer_NaOH</span><span class="p">)</span>
<span class="c1">#Output is:</span>
<span class="o">====================================</span>
<span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">MIXER_NAOH</span> <span class="n">are</span> <span class="p">:</span>
<span class="o">====================================</span>
<span class="n">Stream</span> <span class="o">=</span> <span class="n">Water</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>       <span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Water=0.9*Product&#39;</span><span class="p">]</span>
<span class="n">Stream</span> <span class="o">=</span> <span class="n">NaOH</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="mf">1000.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
<span class="n">Stream</span> <span class="o">=</span> <span class="n">Product</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>      <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
<span class="o">------------------------------------</span>
<span class="n">END</span>

<span class="n">sol</span> <span class="o">=</span> <span class="n">Mixer_NaOH</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># Output is:</span>
    <span class="o">==========================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER_NAOH</span>
    <span class="o">==========================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">4</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">4</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">------------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">MIXER_NAOH</span>
    <span class="o">------------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">MIXER_NAOH</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">Water</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">9000.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Water=0.9*Product&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">NaOH</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">1000.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">Product</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">10000.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.9000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">------------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-18-example-distillation-column-multiple-feeds">
<h3>Example 18: Example <code class="docutils literal notranslate"><span class="pre">distillation</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">multiple</span> <span class="pre">feeds</span></code><a class="headerlink" href="#example-18-example-distillation-column-multiple-feeds" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">18.</span></code> In a distillation column, methanol is separated from water.
The column has two feeds and three outlet streams as shown in the schematic.</p>
<a class="reference internal image-reference" href="../../_images/distillation_column.png"><img alt="../../_images/distillation_column.png" class="align-center" src="../../_images/distillation_column.png" style="width: 432.3px; height: 385.2px;" /></a>
<p>Find the unknown flowrates and mole fractions.</p>
<p>SOLUTION:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 18</span>
<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">distcolumn</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Distillation Column&quot;</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed1</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;feed1&quot;</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed2</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;feed2&quot;</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">methanolproduct</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;methanolproduct&quot;</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">fuselproduct</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;fuselproduct&quot;</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">waterproduct</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;waterproduct&quot;</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed1</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">800</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed1</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.2993</span><span class="p">,</span> <span class="mf">0.0007</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed2</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">feed2</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">methanolproduct</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="o">-</span><span class="mi">700</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">methanolproduct</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.995</span><span class="p">,</span> <span class="mf">0.005</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">fuselproduct</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">fuselproduct</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.002</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mf">0.045</span><span class="p">,])</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">waterproduct</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">distcolumn</span><span class="o">.</span><span class="n">waterproduct</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.002</span><span class="p">,</span> <span class="mf">0.998</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distcolumn</span><span class="p">)</span>

<span class="c1">#Output is:</span>
    <span class="o">=============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed1</span>          <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">800.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.7000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2993&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0007&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed2</span>          <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>       <span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">methanolproduct</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="o">-</span><span class="mf">700.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.9950&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0050&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">fuselproduct</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>      <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0020&#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;0.0450&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">waterproduct</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>      <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0020&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9980&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">---------------------------------------------</span>
    <span class="n">END</span>

<span class="n">distcolumn</span><span class="o">.</span><span class="n">sol</span> <span class="o">=</span> <span class="n">distcolumn</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>

<span class="c1"># Output is:</span>
    <span class="o">===================================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span>
    <span class="o">===================================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">1</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">0</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">4</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">4</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">---------------------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span>
    <span class="o">---------------------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">distcolumn</span><span class="o">.</span><span class="n">sol</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">=========================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=========================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed1</span>          <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">800.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.7000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.2993&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0007&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed2</span>          <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">690.40</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">methanolproduct</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">700.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.9950&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0050&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">fuselproduct</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="mf">12.44</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0020&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9530&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0450&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">waterproduct</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">777.96</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0020&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9980&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">---------------------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-19-example-distillation-column-extra-info">
<h3>Example 19: Example <code class="docutils literal notranslate"><span class="pre">distillation</span> <span class="pre">column</span> <span class="pre">-</span> <span class="pre">extra</span> <span class="pre">info</span></code><a class="headerlink" href="#example-19-example-distillation-column-extra-info" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">19.</span></code> A distillation column has two feeds and three outlet streams
as shown in the schematic. Two additional pieces of information are provided
as indicated under “Other relationships”.</p>
<a class="reference internal image-reference" href="../../_images/distillation_column_extra_info.png"><img alt="../../_images/distillation_column_extra_info.png" class="align-center" src="../../_images/distillation_column_extra_info.png" style="width: 604.1999999999999px; height: 360.0px;" /></a>
<p>Find the unknown flowrates and mass fractions.</p>
<p><a class="reference external" href="https://www.youtube.com/watch?v=DsZ4p_mHSPg">Youtube solution example 19</a></p>
<p>SOLUTION:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 19</span>

<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>
<span class="n">distillationcolumn</span><span class="o">=</span><span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Distillation Column&quot;</span><span class="p">)</span>
<span class="n">m1</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m1&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;F&quot;</span><span class="p">)</span>
<span class="n">m1</span><span class="o">.</span><span class="n">setfractions</span><span class="p">(</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.97</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m2</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m2&quot;</span><span class="p">])</span>
<span class="n">m2</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">5300</span><span class="p">)</span>
<span class="n">m2</span><span class="o">.</span><span class="n">setfractions</span><span class="p">(</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m3</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span> <span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m3&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m3</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">m3</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="n">m3</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;m3=0.5*m1&quot;</span><span class="p">])</span>
<span class="n">m4</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span> <span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m4&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m4</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="o">-</span><span class="mi">1200</span><span class="p">)</span>
<span class="n">m4</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.7</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">])</span>
<span class="n">m5</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span> <span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m5&quot;</span><span class="p">]</span> <span class="p">)</span>
<span class="n">m5</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">m5</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">,</span> <span class="mf">0.4</span><span class="p">])</span>
<span class="n">m5</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;3:m5=0.90*m1&quot;</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distillationcolumn</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">=============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>        <span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0300&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9700&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>  <span class="mf">5300.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>       <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m3=0.5*m1&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span> <span class="o">-</span><span class="mf">1200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.7000&#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m5</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>       <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.6000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.4000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;3:m5=0.90*m1&#39;</span><span class="p">]</span>
    <span class="o">---------------------------------------------</span>
    <span class="n">END</span>

<span class="n">sol</span> <span class="o">=</span> <span class="n">distillationcolumn</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="c1"># Output is:</span>
    <span class="o">===================================================</span>
    <span class="n">Degrees</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span>
    <span class="o">===================================================</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="n">flowrates</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">3</span>
    <span class="n">Number</span> <span class="n">of</span> <span class="n">unknown</span> <span class="s1">&#39;x&#39;</span> <span class="n">fractions</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">4</span>
    <span class="n">Total</span> <span class="n">unknowns</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">7</span>
    <span class="o">--------------------</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="n">component</span> <span class="n">balances</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="ow">in</span> <span class="o">=</span> <span class="p">(</span><span class="n">ΣFx</span><span class="p">)</span><span class="n">out</span> <span class="p">:</span><span class="o">--&gt;</span>  <span class="mi">3</span>
    <span class="n">Total</span> <span class="n">possible</span> <span class="nb">sum</span> <span class="n">of</span> <span class="n">stream</span> <span class="n">fractions</span> <span class="ow">is</span> <span class="n">unity</span> <span class="n">balances</span> <span class="p">(</span><span class="n">Σx</span><span class="p">)</span> <span class="o">=</span> <span class="mi">1</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Other</span> <span class="n">extra</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">2</span>
    <span class="n">Total</span> <span class="n">equations</span> <span class="p">:</span><span class="o">--&gt;</span> <span class="mi">7</span>

    <span class="n">System</span> <span class="n">can</span> <span class="n">be</span> <span class="n">solved</span>

    <span class="n">There</span> <span class="n">are</span> <span class="o">=</span>  <span class="mi">7</span> <span class="n">unknowns</span> <span class="ow">and</span> <span class="mi">7</span> <span class="n">possible</span> <span class="n">equations</span>
    <span class="o">---------------------------------------------------------</span>
    <span class="n">End</span> <span class="n">of</span> <span class="n">degree</span> <span class="n">of</span> <span class="n">freedom</span> <span class="n">analysis</span> <span class="k">for</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span>
    <span class="o">---------------------------------------------------------</span>


    <span class="n">Unknowns</span> <span class="n">successfully</span> <span class="n">computed</span><span class="p">:</span>
    <span class="o">-------------------------------</span>
    <span class="n">Streams</span> <span class="k">with</span> <span class="n">new</span> <span class="n">data</span> <span class="n">have</span> <span class="n">been</span> <span class="n">created</span><span class="o">.</span>
    <span class="n">You</span> <span class="n">can</span> <span class="n">view</span> <span class="n">the</span> <span class="n">solved</span> <span class="n">system</span> <span class="n">by</span> <span class="n">printing</span> <span class="n">the</span> <span class="n">returned</span> <span class="nb">object</span><span class="o">.</span>

<span class="nb">print</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">=========================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">DISTILLATION</span> <span class="n">COLUMN</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=========================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m1</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">2436.85</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0300&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9700&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">5300.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.3884&#39;</span><span class="p">,</span> <span class="s1">&#39;0.6116&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m3</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">1218.42</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;1.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;m3=0.5*m1&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m4</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">1200.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.7000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1030&#39;</span><span class="p">,</span> <span class="s1">&#39;0.1970&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m5</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">5318.42</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.6000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.4000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;3:m5=0.90*m1&#39;</span><span class="p">]</span>
    <span class="o">---------------------------------------------------------</span>
    <span class="n">END</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-20-example-extraction-distillation-with-extra-info">
<h3>Example 20: Example <code class="docutils literal notranslate"><span class="pre">extraction-distillation</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code><a class="headerlink" href="#example-20-example-extraction-distillation-with-extra-info" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">20.</span></code> In a two stage process, acetic acid (A) is extracted from water (W)
into hexanol (H) in  aliquid-liquid extraction vessel and the extract is subsequently
separated by distillation. Assume that water is completely insoluble in hexanol.
A mixture of 18% wt% acetic acid and the balance water is fed to aliquid-liquid
extraction vessel. Pure hexanol is fed to the extractor to extract the acetic acid.
The water-rich stream leaving the vessel is 99.5 wt% water and the balance acetic
acid. The hexanol-rich extract from the extractor is fed to a distillation column.
The composition of the distillate is 96 wt% acetic acid and the balance hexanol.
The bottoms stream contains 97.2 wt% hexanol and recovers 95% of the hexanol fed to the
liquid-liquid extraction vessel. Calculate the percentage of acetic acid in the
process feed that is recovered in the distillate stream. Also, find the unknown
flowrates and mass fractions.</p>
<a class="reference internal image-reference" href="../../_images/extraction_distillation_with_extra_info.png"><img alt="../../_images/extraction_distillation_with_extra_info.png" class="align-center" src="../../_images/extraction_distillation_with_extra_info.png" style="width: 851.07px; height: 450.78000000000003px;" /></a>
<p><a class="reference external" href="https://www.youtube.com/watch?v=my1ZTIDSMbs">Youtube solution example 20</a></p>
<p>SOLUTION:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 20</span>

<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>

<span class="c1"># Define processes</span>
<span class="n">extraction</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Liquid-Liquid Extraction&quot;</span><span class="p">)</span>
<span class="n">distillation</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Distillation&quot;</span><span class="p">)</span>
<span class="n">overall</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;Overall&quot;</span><span class="p">)</span> <span class="c1"># dashed boundary (a) in figure</span>

<span class="c1"># Assign streams to processes</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m1_in</span> <span class="o">=</span> <span class="n">extraction</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m1_in&quot;</span><span class="p">])</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;+F&quot;</span><span class="p">)</span>
<span class="c1"># Component mapping:</span>
<span class="c1"># position 1: Acetic Acid, position 2: Water, position 3: Hexanol</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.18</span><span class="p">,</span> <span class="mf">0.82</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">extraction</span><span class="o">.</span><span class="n">m2_in</span> <span class="o">=</span> <span class="n">extraction</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m2_in&quot;</span><span class="p">])</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m2_in</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;+F&quot;</span><span class="p">)</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m2_in</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">1.00</span><span class="p">])</span>

<span class="n">extraction</span><span class="o">.</span><span class="n">m3_out</span> <span class="o">=</span> <span class="n">extraction</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m3_out&quot;</span><span class="p">])</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m3_out</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m3_out</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">])</span>

<span class="n">extraction</span><span class="o">.</span><span class="n">m4_out</span> <span class="o">=</span> <span class="n">extraction</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m4_out&quot;</span><span class="p">])</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m4_out</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m4_out</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.005</span><span class="p">,</span> <span class="mf">0.995</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="n">distillation</span><span class="o">.</span><span class="n">m3_in</span> <span class="o">=</span> <span class="n">distillation</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m3_in&quot;</span><span class="p">])</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m3_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">extraction</span><span class="o">.</span><span class="n">m3_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>

<span class="n">distillation</span><span class="o">.</span><span class="n">m5_out</span> <span class="o">=</span> <span class="n">distillation</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m5_out&quot;</span><span class="p">])</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m5_out</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m5_out</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.96</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">])</span>

<span class="n">distillation</span><span class="o">.</span><span class="n">m6_out</span> <span class="o">=</span> <span class="n">distillation</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m6_out&quot;</span><span class="p">])</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m6_out</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="s2">&quot;-F&quot;</span><span class="p">)</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m6_out</span><span class="o">.</span><span class="n">setfractions</span><span class="p">([</span><span class="mf">0.028</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.972</span><span class="p">])</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">m6_out</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;3:m6_out=0.95*m2_in&quot;</span><span class="p">])</span>

<span class="n">overall</span><span class="o">.</span><span class="n">m1_in</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m1_in&quot;</span><span class="p">])</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m2_in</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m2_in&quot;</span><span class="p">])</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m4_out</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m4_out&quot;</span><span class="p">])</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m5_out</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m5_out&quot;</span><span class="p">])</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m6_out</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;m6_out&quot;</span><span class="p">])</span>
<span class="c1"># Use setequalto() method to assign stream data</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">extraction</span><span class="o">.</span><span class="n">m1_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m2_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">extraction</span><span class="o">.</span><span class="n">m2_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m4_out</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">extraction</span><span class="o">.</span><span class="n">m4_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m5_out</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">distillation</span><span class="o">.</span><span class="n">m5_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m6_out</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">distillation</span><span class="o">.</span><span class="n">m6_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>

<span class="c1"># Print streams to verify they are defined correctly</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extraction</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">distillation</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall</span><span class="p">)</span>
<span class="c1"># Output not shown here to conserve space</span>

<span class="c1"># Perform degree of freedom analysis</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">distillation</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># From degree of freedom analysis it is clear that none</span>
<span class="c1"># of the processes have degree of freedom = 0.</span>
<span class="c1"># Therefore, as such the system cannot be solved.</span>
<span class="c1"># However, for the &#39;overall; process the degree of freedom = 1.</span>
<span class="c1"># If one of the flow rate is assumed, this will allow the</span>
<span class="c1"># process to be solved.</span>
<span class="c1"># Thus let m2 = 100</span>
<span class="n">overall</span><span class="o">.</span><span class="n">m2_in</span><span class="o">.</span><span class="n">setflow</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>

<span class="c1"># Check degrees of freedom again</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="c1"># The analysis now shows that &quot;overall&quot; system can now be solved.</span>
<span class="n">overall_solution</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall_solution</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">=============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">OVERALL</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m1_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">697.85</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1800&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8200&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m2_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">100.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m4_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">575.11</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0050&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9950&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m5_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">125.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.9600&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0400&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m6_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="o">-</span><span class="mf">97.74</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0280&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9720&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;3:m6_out=0.95*m2_in&#39;</span><span class="p">]</span>
    <span class="o">---------------------------------------------</span>
    <span class="n">END</span>

<span class="c1"># All streams except m3 are now known.</span>
<span class="c1"># Use solution of &quot;overall&quot; system to update streams attached to other processes/systems.</span>
<span class="c1"># Update the extraction streams</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">m1_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m2_in</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">m2_in</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">m4_out</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">overall_solution</span><span class="o">.</span><span class="n">m4_out</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="c1"># Check system streams are correctly defined</span>
<span class="nb">print</span><span class="p">(</span><span class="n">extraction</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">==================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">LIQUID</span><span class="o">-</span><span class="n">LIQUID</span> <span class="n">EXTRACTION</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">==================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m1_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">697.85</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1800&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8200&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m2_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">100.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m3_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>         <span class="o">-</span><span class="n">F</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;  x   &#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;  x   &#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m4_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">575.11</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0050&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9950&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------------------------</span>
    <span class="n">END</span>
<span class="c1"># Check degrees of freedom again</span>
<span class="n">extraction</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="c1"># DOF analysis shows that extraction system is now solvable.</span>
<span class="n">sol</span> <span class="o">=</span> <span class="n">extraction</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">sol</span><span class="p">)</span>
<span class="n">Output</span> <span class="ow">is</span><span class="p">:</span>
    <span class="o">==============================================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">LIQUID</span><span class="o">-</span><span class="n">LIQUID</span> <span class="n">EXTRACTION</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">==============================================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m1_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">697.85</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.1800&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8200&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m2_in</span> <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">100.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;1.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m3_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">222.74</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.5510&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.4490&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">m4_out</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="o">-</span><span class="mf">575.11</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.0050&#39;</span><span class="p">,</span> <span class="s1">&#39;0.9950&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">--------------------------------------------------------------</span>

<span class="c1"># ALL FLOWRATES AND FRACTIONS ARE NOW KNOWN</span>
<span class="c1"># COMPUTE ACETIC ACID RECOVERY</span>
<span class="c1"># acetic acid in feed = m1_in * 0.18</span>
<span class="n">aceticacid_infeed</span> <span class="o">=</span> <span class="n">overall_solution</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">flowrate</span> <span class="o">*</span> <span class="n">overall_solution</span><span class="o">.</span><span class="n">m1_in</span><span class="o">.</span><span class="n">fractions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># acetic acid in distillate =</span>
<span class="n">aceticacid_indistillate</span> <span class="o">=</span> <span class="n">overall_solution</span><span class="o">.</span><span class="n">m5_out</span><span class="o">.</span><span class="n">flowrate</span> <span class="o">*</span> <span class="n">overall_solution</span><span class="o">.</span><span class="n">m5_out</span><span class="o">.</span><span class="n">fractions</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">aceticacid_recovery</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">aceticacid_indistillate</span><span class="o">/</span><span class="n">aceticacid_infeed</span> <span class="o">*</span><span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Percent acetic acid from feed recovered in distillate = </span><span class="si">{</span><span class="n">aceticacid_recovery</span><span class="si">:</span><span class="s2"> 0.1f</span><span class="si">}</span><span class="s2"> %&quot;</span><span class="p">)</span>
<span class="c1"># Output is:</span>
<span class="n">Percent</span> <span class="n">acetic</span> <span class="n">acid</span> <span class="kn">from</span> <span class="nn">feed</span> <span class="n">recovered</span> <span class="ow">in</span> <span class="n">distillate</span> <span class="o">=</span>  <span class="mf">95.5</span> <span class="o">%</span>
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="example-21-example-two-unit-process-with-extra-info">
<h3>Example 21: Example <code class="docutils literal notranslate"><span class="pre">two</span> <span class="pre">unit</span> <span class="pre">process</span> <span class="pre">with</span> <span class="pre">extra</span> <span class="pre">info</span></code><a class="headerlink" href="#example-21-example-two-unit-process-with-extra-info" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">Example</span> <span class="pre">21.</span></code> A feed containing equimolar amounts of methanol (M) and water (W) is mixed
with 10 moles of a 40 mol% aqueous methanol stream. The mixture enters a separation unit
that creates two streams. A top stream exits that contains 70 mol% methanol and the rest
water. The other stream, which is 70 moles, enters a second separation unit.
A top stream exits the second unit as a 50% methanol /50% water mixture. The other stream
is unknown in mole and methanol/water fractions. If the fresh feed to the system
is 100 moles (the equimolar mixture) and the two top streams exiting the separation units
have the same flow rate, find the molar flow rate and composition of the other stream
exiting the second separation unit.</p>
<a class="reference internal image-reference" href="../../_images/two_unit_separation.png"><img alt="../../_images/two_unit_separation.png" class="align-center" src="../../_images/two_unit_separation.png" style="width: 855.0300000000001px; height: 480.81px;" /></a>
<p><a class="reference external" href="https://www.youtube.com/watch?v=JfD5iyoKD8w">Youtube solution example 21</a></p>
<p>SOLUTION:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># EXAMPLE 20</span>

<span class="kn">from</span> <span class="nn">pychemengg.massbalances</span> <span class="kn">import</span> <span class="n">physicalmassbalance</span> <span class="k">as</span> <span class="n">pmb</span>

<span class="c1"># Define the processes</span>
<span class="n">overall</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;overall&quot;</span><span class="p">)</span>
<span class="n">mixer</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;mixer&quot;</span><span class="p">)</span>
<span class="n">unit1</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;unit1&quot;</span><span class="p">)</span>
<span class="n">unit2</span> <span class="o">=</span> <span class="n">pmb</span><span class="o">.</span><span class="n">PhysicalProcess</span><span class="p">(</span><span class="s2">&quot;unit2&quot;</span><span class="p">)</span>
<span class="c1"># attach streams to mixer</span>
<span class="n">streamnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;feed1&quot;</span><span class="p">,</span> <span class="s2">&quot;feed2&quot;</span><span class="p">,</span> <span class="s2">&quot;feedmix&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.4</span><span class="p">,</span> <span class="mf">0.6</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">mixer</span><span class="o">.</span><span class="n">feed1</span><span class="p">,</span> <span class="n">mixer</span><span class="o">.</span><span class="n">feed2</span><span class="p">,</span> <span class="n">mixer</span><span class="o">.</span><span class="n">feedmix</span> <span class="o">=</span> <span class="n">mixer</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streamnames</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># attach streams to unit 1</span>
<span class="n">streamnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;unit1feed&quot;</span><span class="p">,</span> <span class="s2">&quot;top1&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom1&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">70</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.7</span><span class="p">,</span> <span class="mf">0.3</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">unit1</span><span class="o">.</span><span class="n">unit1feed</span><span class="p">,</span> <span class="n">unit1</span><span class="o">.</span><span class="n">top1</span><span class="p">,</span> <span class="n">unit1</span><span class="o">.</span><span class="n">bottom1</span> <span class="o">=</span> <span class="n">unit1</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streamnames</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># attach streams to unit 2</span>
<span class="n">streamnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;unit2feed&quot;</span><span class="p">,</span> <span class="s2">&quot;top2&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom2&quot;</span><span class="p">]</span>
<span class="n">flowrates</span> <span class="o">=</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">,</span> <span class="s2">&quot;-F&quot;</span><span class="p">]</span>
<span class="n">fractions</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">unit2</span><span class="o">.</span><span class="n">unit2feed</span><span class="p">,</span> <span class="n">unit2</span><span class="o">.</span><span class="n">top2</span><span class="p">,</span> <span class="n">unit2</span><span class="o">.</span><span class="n">bottom2</span> <span class="o">=</span> <span class="n">unit2</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streamnames</span><span class="p">,</span> <span class="n">flowrates</span><span class="o">=</span><span class="n">flowrates</span><span class="p">,</span> <span class="n">fractions</span><span class="o">=</span><span class="n">fractions</span><span class="p">)</span>
<span class="c1"># attach streams to overall</span>
<span class="n">streamnames</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;feed1&quot;</span><span class="p">,</span> <span class="s2">&quot;feed2&quot;</span><span class="p">,</span> <span class="s2">&quot;top1&quot;</span><span class="p">,</span> <span class="s2">&quot;top2&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom2&quot;</span><span class="p">]</span>
<span class="n">overall</span><span class="o">.</span><span class="n">feed1</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">feed2</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">top1</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">top2</span><span class="p">,</span> <span class="n">overall</span><span class="o">.</span><span class="n">bottom2</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">attachstreams</span><span class="p">(</span><span class="n">streamnames</span><span class="o">=</span><span class="n">streamnames</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">feed1</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">mixer</span><span class="o">.</span><span class="n">feed1</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">feed2</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">mixer</span><span class="o">.</span><span class="n">feed2</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">top1</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">unit1</span><span class="o">.</span><span class="n">top1</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">top2</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">unit2</span><span class="o">.</span><span class="n">top2</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">bottom2</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">unit2</span><span class="o">.</span><span class="n">bottom2</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">overall</span><span class="o">.</span><span class="n">feed2</span><span class="o">.</span><span class="n">setextrainfo</span><span class="p">([</span><span class="s2">&quot;top1=1*top2&quot;</span><span class="p">])</span>

<span class="c1"># print the systems to verify they have been correctly setup</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixer</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unit1</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unit2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall</span><span class="p">)</span>
<span class="c1"># Output not shown here to conserve space</span>

<span class="c1"># Compute degrees of freedom</span>
<span class="n">mixer</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">unit1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">unit2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>

<span class="c1"># Based on degrees of freedom analysis mixer can be solved</span>
<span class="n">mixersol</span> <span class="o">=</span> <span class="n">mixer</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">mixersol</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">===========================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">MIXER</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">===========================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed1</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">100.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.5000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed2</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>     <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.6000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feedmix</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">110.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4909&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5091&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">-------------------------------------------</span>
    <span class="n">END</span>

<span class="c1"># Use solution of &quot;mixer&quot; to update streams attached to other processes/systems.</span>
<span class="n">unit1</span><span class="o">.</span><span class="n">unit1feed</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">mixersol</span><span class="o">.</span><span class="n">feedmix</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="c1"># print unit 1 to verify it was updated</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unit1</span><span class="p">)</span>


<span class="c1">#Find degrees of freedom again</span>
<span class="n">unit1</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">unit2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="c1"># DOF for unit1 = 0, therefore solve unit1</span>
<span class="n">unit1sol</span> <span class="o">=</span> <span class="n">unit1</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">unit1sol</span><span class="p">)</span>
<span class="c1"># Use solution of &quot;unit1&quot; to update streams attached to other processes/systems.</span>
<span class="n">overall</span><span class="o">.</span><span class="n">top1</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">unit1sol</span><span class="o">.</span><span class="n">top1</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
<span class="n">unit2</span><span class="o">.</span><span class="n">unit2feed</span><span class="o">.</span><span class="n">setequalto</span><span class="p">(</span><span class="n">unit1sol</span><span class="o">.</span><span class="n">bottom1</span><span class="p">,</span> <span class="n">flowdirection</span><span class="o">=</span><span class="s2">&quot;+&quot;</span><span class="p">)</span>
<span class="nb">print</span> <span class="p">(</span><span class="n">unit2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overall</span><span class="p">)</span>

<span class="c1">#Find degrees of freedom again</span>
<span class="n">unit2</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="n">overall</span><span class="o">.</span><span class="n">degreesoffreedom</span><span class="p">()</span>
<span class="c1"># DOF of overall = 0, therefore solve overall system</span>
<span class="n">overallsol</span> <span class="o">=</span> <span class="n">overall</span><span class="o">.</span><span class="n">solvesystem</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">overallsol</span><span class="p">)</span>
<span class="c1"># Output is:</span>
    <span class="o">=============================================</span>
    <span class="n">Process</span> <span class="n">streams</span> <span class="k">for</span> <span class="n">SOLUTION</span> <span class="n">TO</span> <span class="n">OVERALL</span> <span class="n">are</span> <span class="p">:</span>
    <span class="o">=============================================</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed1</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="mf">100.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.5000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">feed2</span>  <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>    <span class="mf">10.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.4000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.6000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;top1=1*top2&#39;</span><span class="p">]</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">top1</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">40.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.7000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.3000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">top2</span>   <span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">40.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.5000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.5000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">Stream</span> <span class="o">=</span> <span class="n">bottom2</span><span class="p">;</span> <span class="n">Flowrate</span> <span class="o">=</span>   <span class="o">-</span><span class="mf">30.00</span><span class="p">;</span> <span class="n">Fractions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0.2000&#39;</span><span class="p">,</span> <span class="s1">&#39;0.8000&#39;</span><span class="p">];</span> <span class="n">Extra</span> <span class="n">Info</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="o">---------------------------------------------</span>
    <span class="n">END</span>
<span class="c1"># bottom2 stream provides the information sought in the problem.</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="../../autosummary_pychemengg.html" class="btn btn-neutral float-right" title="PyChemEngg API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="index.html" class="btn btn-neutral float-left" title="PyChemEngg User Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Harvinder Singh Gill.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 
<div class="footer">This page uses <a href="https://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script>
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>


</body>
</html>